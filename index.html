<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Информация о пользователе</title>
  <script src="https://telegram.org/js/telegram-web-app.js?2"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }

    #user-info {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    #user-info h3 {
      margin-top: 0;
    }

    #user-info pre {
      white-space: pre-wrap;
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 3px;
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const userInfo = document.getElementById('user-info');
      
      // Основная информация о пользователе
      userInfo.innerHTML += `
        <h3>Основная информация</h3>
        <p><strong>Идентификатор пользователя:</strong> ${Telegram.WebApp.initDataUnsafe.user.id || "Неизвестно"}</p>
        <p><strong>Имя пользователя:</strong> ${Telegram.WebApp.initDataUnsafe.user.username || "Неизвестно"}</p>
        <p><strong>Имя:</strong> ${Telegram.WebApp.initDataUnsafe.user.first_name || "Неизвестно"} ${Telegram.WebApp.initDataUnsafe.user.last_name || "Неизвестно"}</p>
      `;

      // Данные, переданные боту
      if (Telegram.WebApp.initData) {
        userInfo.innerHTML += `
          <h3>Данные, переданные боту</h3>
          <pre>${JSON.stringify(Telegram.WebApp.initData, null, 2)}</pre>
        `;
      } else {
        userInfo.innerHTML += `
          <h3>Данные, переданные боту</h3>
          <p>Данные не были переданы.</p>
        `;
      }

      // Параметры темы пользователя
      if (Telegram.WebApp.themeParams) {
        userInfo.innerHTML += `
          <h3>Параметры темы</h3>
          <pre>${JSON.stringify(Telegram.WebApp.themeParams, null, 2)}</pre>
        `;
      } else {
        userInfo.innerHTML += `
          <h3>Параметры темы</h3>
          <p>Информация о параметрах темы не доступна.</p>
        `;
      }

      // Информация о запросе (если есть)
      if (Telegram.WebApp.initDataUnsafe.query_id) {
        userInfo.innerHTML += `
          <h3>Информация о запросе</h3>
          <p><strong>Идентификатор запроса:</strong> ${Telegram.WebApp.initDataUnsafe.query_id}</p>
        `;
      }

      // Дополнительная информация (если доступна)
      if (Telegram.WebApp.initDataUnsafe.receiver) {
        userInfo.innerHTML += `
          <h3>Информация о чате</h3>
          <p><strong>Тип чата:</strong> ${Telegram.WebApp.initDataUnsafe.receiver.type || "Неизвестно"}</p>
          <p><strong>Название чата:</strong> ${Telegram.WebApp.initDataUnsafe.receiver.title || "Неизвестно"}</p>
          <p><strong>Имя пользователя чата:</strong> ${Telegram.WebApp.initDataUnsafe.receiver.username || "Неизвестно"}</p>
        `;
      }
    });
  </script>
</head>
<body>
  <h1>Информация о пользователе</h1>
  <div id="user-info"></div>
</body>
</html>
