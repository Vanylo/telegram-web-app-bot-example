<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Пример Biometrics</title>
  <script src="https://telegram.org/js/telegram-web-app.js?2"></script>
  <script>
    // Обработчик событий
    Telegram.WebApp.onEvent('biometricManagerUpdated', function() {
      const biometricManager = Telegram.WebApp.BiometricManager;
      console.log("BiometricManager обновлен:");
      console.log("Инициализирован: ", biometricManager.isInited);
      console.log("Доступен: ", biometricManager.isBiometricAvailable);
      console.log("Тип: ", biometricManager.biometricType);
      // ... и т.д.
    });

    document.addEventListener('DOMContentLoaded', function() {
      const biometricManager = Telegram.WebApp.BiometricManager;

      // Проверьте доступность Biometrics
      if (!biometricManager.isBiometricAvailable) {
        alert("Биометрия недоступна на этом устройстве");
        return;
      }

      // Инициализация
      biometricManager.init(); 

      // Кнопка для запроса доступа
      const requestButton = document.getElementById('request-button');
      requestButton.addEventListener('click', function() {
        biometricManager.requestAccess({reason: "Ваша биометрия требуется для ..." }, function(access_granted) {
          if (access_granted) {
            alert("Доступ к биометрии получен!");
          } else {
            alert("Доступ к биометрии отклонен.");
          }
        });
      });

      // Кнопка для аутентификации
      const authButton = document.getElementById('auth-button');
      authButton.addEventListener('click', function() {
        biometricManager.authenticate({reason: "Ваша биометрия требуется для ..." }, function(success, token) {
          if (success) {
            alert("Аутентификация успешна! Токен: " + token);
          } else {
            alert("Аутентификация не удалась.");
          }
        });
      });
    });
  </script>
</head>
<body>
  <button id="request-button">Запросить доступ к биометрии</button>
  <button id="auth-button">Аутентифицироваться</button>
</body>
</html>
